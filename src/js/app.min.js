function initCore(){var loader=new THREE.JSONLoader;loader.load("./js/models/gargantua.json",function(geometry){var mesh=new THREE.Mesh(geometry,material);gargantua.add(mesh)})}function initTriangles(){for(var i=0;i<triangles.length;i++){var loader=new THREE.JSONLoader;loader.load("./js/models/triangles"+i+".json",function(geometry){var mesh=new THREE.Mesh(geometry,material);gargantua.add(mesh)})}}function initWaves(){for(var i=0;i<waves.length;i++){var loader=new THREE.JSONLoader;loader.load("./js/models/wave"+i+".json",function(geometry){var mesh=new THREE.Mesh(geometry,material);gargantua.add(mesh)})}}function animateParticles(){for(var verts=particleSystem.geometry.vertices,deltaTime=5e-4*Date.now(),rnd=.025*Math.random(),i=0;i<verts.length;i++){var vert=verts[i];vert.x+=Math.sin(.2*deltaTime)*rnd,vert.y+=Math.cos(.4*deltaTime)*rnd,vert.z+=Math.cos(.6*deltaTime)*rnd}particleSystem.geometry.verticesNeedUpdate=!0}var scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),core,triangles=["triangles1","triangles2","triangles3"],waves=["wave0","wave1"],gargantua=new THREE.Object3D,renderer=new THREE.WebGLRenderer;renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement);var controls=new THREE.OrbitControls(camera,renderer.domElement);controls.enableDamping=!0,controls.dampingFactor=.25,controls.enableZoom=!0;var deviceControls=new THREE.DeviceOrientationControls(gargantua),light=new THREE.AmbientLight(16777215,.1);scene.add(light);var sphere=new THREE.SphereGeometry(.5,16,8),light1=new THREE.PointLight(16732160,2,50);light1.add(new THREE.Mesh(sphere,new THREE.MeshBasicMaterial({color:16732160}))),scene.add(light1);var light2=new THREE.PointLight(16713216,2,50);light2.add(new THREE.Mesh(sphere,new THREE.MeshBasicMaterial({color:16713216}))),scene.add(light2);var light3=new THREE.PointLight(16711935,2,50);light3.add(new THREE.Mesh(sphere,new THREE.MeshBasicMaterial({color:16711935}))),scene.add(light3);var light4=new THREE.PointLight(10088512,2,50);light4.add(new THREE.Mesh(sphere,new THREE.MeshBasicMaterial({color:10088512}))),scene.add(light4);var material=new THREE.MeshPhongMaterial({color:3355443,shading:THREE.SmoothShading});core=initCore(),initTriangles(),initWaves(),scene.add(gargantua);for(var particleCount=1800,particles=new THREE.Geometry,particleMaterial=new THREE.PointsMaterial({color:16777215,size:1,map:(new THREE.TextureLoader).load("./js/textures/particle.png"),blending:THREE.AdditiveBlending,transparent:!0,depthWrite:!0,depthTest:!0,opacity:Math.random()+.5}),p=0;p<particleCount;p++){var pX=500*Math.random()-250,pY=500*Math.random()-250,pZ=500*Math.random()-250,particle=new THREE.Vector3(pX,pY,pZ);particles.vertices.push(particle)}var particleSystem=new THREE.Points(particles,particleMaterial);scene.add(particleSystem),particleSystem.sortParticles=!0,camera.position.z=7;var render=function(){requestAnimationFrame(render),gargantua.rotation.y+=1e-4,controls.update(),deviceControls.update();var time=5e-4*Date.now();light1.position.x=30*Math.sin(.7*time),light1.position.y=40*Math.cos(.5*time),light1.position.z=30*Math.cos(.3*time),light2.position.x=30*Math.cos(.3*time),light2.position.y=40*Math.sin(.5*time),light2.position.z=30*Math.sin(.7*time),light3.position.x=30*Math.sin(.7*time),light3.position.y=40*Math.cos(.3*time),light3.position.z=30*Math.sin(.5*time),light4.position.x=30*Math.sin(.3*time),light4.position.y=40*Math.cos(.7*time),light4.position.z=30*Math.sin(.5*time),animateParticles(),renderer.render(scene,camera)};render(),window.addEventListener("resize",function(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)},!1);